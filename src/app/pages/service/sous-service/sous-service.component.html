<mat-card class="cardWithShadow">
    <mat-card-content>
        <mat-card-title>Sous service</mat-card-title>
        <!-- <mat-card-subtitle>This is test page</mat-card-subtitle> -->
    </mat-card-content>
</mat-card>

<mat-card class="mat-mdc-card mdc-card cardWithShadow">
    <!-- Barre des services en haut -->
    <mat-card-content>
        <div class="service-buttons">
            <mat-card *ngFor="let service of services" class="service-card" (click)="selectService(service)" [ngStyle]="{ 'background-color': service.backgroundColor }">
                <mat-card-header [ngClass]="{ 'active-service': selectedService?.id === service.id }">
                    <mat-icon mat-card-avatar class="service-icon">{{ service.icon }}</mat-icon>
                    <mat-card-title>{{ service.nom }}</mat-card-title>
                </mat-card-header>
            </mat-card>
        </div>
    </mat-card-content>
</mat-card>

<mat-card class="cardWithShadow">
    <!-- 🔹 Barre des services en haut -->
    <mat-card-content>
        <div class="service-buttons">
            <button mat-button *ngFor="let service of services"
                [ngClass]="{ 'active-service': selectedService?.id === service.id }" (click)="selectService(service)">
                {{ service.nom }}
            </button>
        </div>
    </mat-card-content>
</mat-card>

<mat-card class="mat-mdc-card mdc-card cardWithShadow">
    <mat-card-content class="mat-mdc-card-content">
        <div class="row justify-content-between align-items-center">

            <!-- Champ de recherche avec application de filtre -->
            <div class="col-sm-4">
                <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Rechercher un sous-service</mat-label>
                    <input matInput (input)="applyFilter($event)" placeholder="Ex: Réparation moteur" />
                    <mat-icon matSuffix>search</mat-icon>
                </mat-form-field>
            </div>

            <!-- Bouton d'ajout de sous-service -->
            <div class="col-sm-4 d-flex align-items-center justify-content-end">
                <a mat-button mat-flat-button color="primary" class="mdc-button mat-mdc-button mat-primary">
                    <span class="mdc-button__label">Add Invoice</span>
                </a>
            </div>
        </div>
    </mat-card-content>
</mat-card>



<mat-card class="cardWithShadow">
    <mat-card-content>
        <!-- 🔹 Tableau des sous-services -->
        <mat-card class="table-container">
            <mat-table [dataSource]="filteredSousServices" class="mat-elevation-z8">

                <!-- 🟢 Colonne Nom -->
                <ng-container matColumnDef="nom">
                    <mat-header-cell *matHeaderCellDef> Nom </mat-header-cell>
                    <mat-cell *matCellDef="let sousService"> {{ sousService.nom }} </mat-cell>
                </ng-container>

                <!-- 🟠 Colonne Service -->
                <ng-container matColumnDef="service">
                    <mat-header-cell *matHeaderCellDef> Service </mat-header-cell>
                    <mat-cell *matCellDef="let sousService"> {{ sousService.serviceNom }} </mat-cell>
                </ng-container>

                <!-- 🔵 Colonne Actions -->
                <ng-container matColumnDef="actions">
                    <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
                    <mat-cell *matCellDef="let sousService">
                        <button mat-icon-button color="primary">
                            <mat-icon>edit</mat-icon>
                        </button>
                        <button mat-icon-button color="warn">
                            <mat-icon>delete</mat-icon>
                        </button>
                    </mat-cell>
                </ng-container>

                <!-- 🏆 En-tête et corps du tableau -->
                <mat-header-row *matHeaderRowDef="['nom', 'service', 'actions']"></mat-header-row>
                <mat-row *matRowDef="let row; columns: ['nom', 'service', 'actions'];"></mat-row>
            </mat-table>

            <!-- Pagination -->
            <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
        </mat-card>
    </mat-card-content>
</mat-card>