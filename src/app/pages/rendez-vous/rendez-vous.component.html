<!-- ============================================================== -->
<!-- Simple four boxes Row -->
<!-- ============================================================== -->
<mat-card class="cardWithShadow">
    <mat-card-content>
        <mat-card-title>Rendez-vous</mat-card-title>
        <!-- <mat-card-subtitle>This is test page</mat-card-subtitle> -->
    </mat-card-content>
</mat-card>

<!-- ============================================================== -->
<!-- Service List -->
<!-- ============================================================== -->
<mat-card class="cardWithShadow">
    <mat-card-content>
        <mat-card-title>Historique des Rendez-vous</mat-card-title>
        <mat-table [dataSource]="paginatedRendezVous" matSort class="mat-elevation-z8">
            <ng-container matColumnDef="Date et heure demande">
                <mat-header-cell *matHeaderCellDef> Date et heure demande </mat-header-cell>
                <mat-cell *matCellDef="let rendezVous"> {{ rendezVous.dateHeureDemande | date:'dd/MM/yyyy hh:mm:ss' }}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="Client">
                <mat-header-cell *matHeaderCellDef> Client </mat-header-cell>
                <mat-cell *matCellDef="let rendezVous">
                    {{ rendezVous.client.nom }} {{ rendezVous.client.prenom }}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="Date du rendez-vous">
                <mat-header-cell *matHeaderCellDef> Date du rendez-vous </mat-header-cell>
                <mat-cell *matCellDef="let rendezVous"> {{ rendezVous.dateRendezVous | date:'dd/MM/yyyy hh:mm:ss' }}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="N° Matriculation">
                <mat-header-cell *matHeaderCellDef> N° Immatriculation </mat-header-cell>
                <mat-cell *matCellDef="let rendezVous">
                    {{ rendezVous.voiture.numeroImmatriculation }}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="Validateur">
                <mat-header-cell *matHeaderCellDef> Validateur </mat-header-cell>
                <mat-cell *matCellDef="let rendezVous">
                    {{ rendezVous.validateur?.nom || '--' }} {{ rendezVous.validateur?.prenom || '--' }}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="Remarque">
                <mat-header-cell *matHeaderCellDef> Remarque </mat-header-cell>
                <mat-cell *matCellDef="let rendezVous">
                    {{ rendezVous.remarque || '--' }}
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="Statut">
                <mat-header-cell *matHeaderCellDef> Statut </mat-header-cell>
                <mat-cell *matCellDef="let rendezVous">
                    <div [ngClass]="getStatusClass(rendezVous.etat)" class="status-container">
                        <span>{{ rendezVous.etat }}</span>
                    </div>
                </mat-cell>
            </ng-container>


            <ng-container matColumnDef="actions">
                <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
                <mat-cell *matCellDef="let rendezVous">
                    <div *ngIf="!rendezVous.dateSuppression">
                        <button mat-icon-button color="accent" (click)="openDetailsModal(rendezVous)">
                            <mat-icon>visibility</mat-icon>
                        </button>
                        <button mat-icon-button color="primary">
                            <mat-icon>edit</mat-icon>
                        </button>
                    </div>
                </mat-cell>
            </ng-container>

            <!-- Table Header & Row Definitions -->
            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
        </mat-table>

        <!-- Pagination -->
        <mat-paginator [length]="paginatedRendezVous.length" [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 20]"
            (page)="onPaginateChange($event)">
        </mat-paginator>
    </mat-card-content>
</mat-card>